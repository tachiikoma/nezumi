====== ddd ======
<sub>{{ddd.odt|Original file}}</sub>

===== как избежать катастрофы? =====

От разрушения данных не застрахован никто, но при правильной политике резервирования вся процедура восстановления сводится к замене негодного винчестера на новый и переписыванию данных с архивного накопителя. Восстанавливать данные на старый диск даже при логических разрушениях категорически недопустимо, т. к. если в процессе копирования выяснится, что резервный носитель испорчен, вам придется делать харакири, поскольку вы только что лишились и оригинала, и копии.

Если же резервной копии нет или она устарела, немедленно бросьте все текущие дела и займитесь ее созданием! Ох, и зачем это я говорю? Ведь все равно не займетесь же… Тогда по крайней мере регулярно дефрагментируйте винчестер – нефраментированные файлы восстанавливаются не в пример легче.

Кстати говоря, из всех разделов чаще всего гибнет первый (т.е. диск С:), не держите на нем ничего ценного. Диск, разумеется, должен быть разбит. Но если вы не разбили его перед установкой операционной системе не пытайтесь переразбивать его сейчас, т. к. риск потерять все данные при этом очень велик!

Внимательно следите за показаниями системы мониторинга S.M.A.R.T., которые умеют считывать многочисленные утилиты (например, **AIDA**). Стремительный рост количества замещенных секторов (ReallocatedSectorCount) не предвещает ничего хорошего и диск в срочном порядке рекомендуется заменить. При этом следует учитывать именно //градиент//, а не абсолютное значение! Увеличение количества ошибок сырого чтения (rawreaderrorrate) указывает на серьезные проблемы и от такого диска лучше поскорее избавится, скопировав все данные на другой. Рост численности ошибок позиционирования (Seekerrorrate) и в особенности повторных раскруток шпинделя (SpinRetryCount) говорит о растущих разногласиях механической части, обычно заканчивающихся поломкой, а вот увеличение времени раскрутки шпинделя (SpinUpTime) явление вполне нормальное, обусловленное конструктивными особенностями некоторых жестких дисков и до тех пор, пока оно не достигнет порогового значения, никаких поводов для волнений нет.

Ошибки передачи по ATA-интерфейсу (UltraATACRCErrorRate) очень коварны и если они выйдут за пределы корректирующей способности избыточных кодов, файловой системе придет каюк. Проверьте – не перекручен ли интерфейсный кабель и при необходимости укоротите его.

Внимательно следите за температурой, не допуская перегрева винчестера. Предельно допустимую температуру можно узнать из спецификации. Большинство современных винчестеров нормально выдерживают температуру окружающей среды до 50°С – 60°С (не путайте ее с показаниями встроенного термодатчика), не требуя дополнительного охлаждения.

{{ddd_Image_0.png?554}}

Рисунок 1 показания S.M.A.R.T, считанные утилитой AIDA

Не разгоняйте процессор, PCI-шину и оперативную память! Все это может привести к необратимому разрушению служебных структур файловой системы, затраты на восстановление которой скушают весь выигрыш от разгона. Кстати говоря, на винчестерах с кэш-памятью в 8 Мб старые версии Windows, вплоть до Windows XP, чувствуют себя очень плохо, зачастую приводя к серьезной порче винчестера, т. к. при выходе из системы вырубают питание винчестера еще до того, как он успевает сбросить кэш. Проблема решается либо переходом на XP (боже мой, что это за х…), либо установкой соответствующего пакета обновления. А вообще говоря, винчестеры с большим кэшем лучше не приобретать, по слухам они недостаточно надежны и имеют много нерешенных инженерных проблем.

Не используйте штатного шифрования файлов и динамических томов – все они хранят служебную информацию в реестре операционной системе и после ее краха становятся недоступными. Так же никогда не запускайте программ, в которых не уверены, и уж тем более не предоставляйте им права администратора! Всегда используйте минимум необходимых для работы прав, входя под администратором лишь при необходимости. Запрещайте модификацию всех файлов, которые не собирайтесь модифицировать в ближайшее время, отобрав этот атрибут у всех пользователей, под которыми вы обычно регистрируетесь в системе.

Следуя всем выше перечисленным советам, вы многократно снижаете риск необратимой потери данных и значительно упрощаете процедуру их восстановления в случае если они все-таки будут разрушены.

===== >>> врезка дыры в безопасности =====

Считается, что операционные системы семейства Windows NT надежно защищают данные от разрушения. Во-первых, они блокируют прямой доступ к аппаратуре, во-вторых, обеспечивают возможность разграничения доступа, которую по уверениям Microsoft еще никто до сих пор не обошел. Во всяком случае – универсально.

Ха! Ща мы ее… У вас установлен пишущий CD? А пишущие программы е? А работают они случайно не через ASPI? А вы знаете, что драйвер ASPI позволяет любому приложению независимо от уровня его полномочий работать со всеми IDE/SCSI устройствами на низком уровне, в частности стирая все сектора на хрен? Ладно, удалите вы этот ASPI, но тогда останется SPTI, намертво вживленный в операционную систему, и позволяющий делать все тоже самое, что и ASPI, пускай и требующий наличия прав администратора. Думаете злоумышленнику их будет трудно получить? Вы жестоко ошибаетесь! Чтение физического диска на сектором уровне по умолчанию доступно всем пользователям без исключения (и его не так-то просто запретить), а на этот уровне не существует понятия "привилегий" и файлы с конфиденциальной информацией (включая информацию по аутентификации) доступны всем пользователям без разбора (строго говоря, никаких "файлов" на сектором уровне не существует, но для хакеров это не преграда).

Что же касается драйверов… их полномочия ничем не ограничены и они могут делать с системой все что угодно. Нередко драйвера содержат критические ошибки, пускающие Windows в разнос и превращающие файловую систему в манную кашу. Особенно этим грешат драйвера от кустарных разработчиков, наплевательски относящихся к культуре программирования. Можно запретить приложению устанавливать свои драйвера в системе? Ну в общем-то можно (установите его с правами простого пользователя), но что это нам даст? Без драйвера приложение работать не будет, а достойную альтернативу ему удается найти не всегда… А вы говорите секьютети, понимаешь там, безопасность…


